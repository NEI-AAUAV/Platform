{"ast":null,"code":"var _jsxFileName = \"/home/joao/Documents/Website/src/Pages/Seniors/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router';\nimport { Row, Spinner } from 'react-bootstrap';\nimport Image from 'react-bootstrap/Image';\nimport Tabs from \"../../Components/Tabs/index.js\";\nimport TextList from \"../../Components/TextList\";\nimport SeniorsCard from \"./SeniorsCard\";\nimport Typist from 'react-typist'; // Animation\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst animationBase = parseFloat(process.env.REACT_APP_ANIMATION_BASE);\nconst animationIncrement = parseFloat(process.env.REACT_APP_ANIMATION_INCREMENT);\n\nconst Seniors = () => {\n  _s();\n\n  // get course from URL parameters\n  let {\n    id\n  } = useParams();\n  let animKey = 0; // index for delaying animations\n\n  const [people, setPeople] = useState([]);\n  const [selectedYear, setSelectedYear] = useState();\n  const [anos, setAnos] = useState([]);\n  const [img, setImg] = useState(\"\");\n  const [namesOnly, setNamesOnly] = useState(false);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    // get list of courses to check if 'id' is valid\n    fetch(process.env.REACT_APP_API + \"/seniors/courses/\").then(response => response.json()).then(response => {\n      let courses = response[\"data\"].map(el => el[\"course\"]);\n\n      if (!courses.includes(id)) {\n        window.location.href = \"/404\";\n      }\n    }).catch(error => {\n      window.location.href = \"/404\";\n    }); // pegar o número de anos\n\n    fetch(process.env.REACT_APP_API + \"/seniors/courses/years/?course=\" + id).then(response => response.json()).then(response => {\n      var anos = response.data.map(curso => curso.year).sort((a, b) => b - a);\n\n      if (anos.length > 0) {\n        setSelectedYear(anos[0]);\n        setAnos( /*#__PURE__*/_jsxDEV(Tabs, {\n          tabs: anos,\n          _default: anos[0],\n          onChange: setSelectedYear\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 29\n        }, this));\n      } else setAnos(\"\");\n    }).catch(error => {\n      window.location.href = \"/404\";\n    });\n  }, []);\n  useEffect(() => {\n    if (selectedYear == undefined) return;\n    setLoading(true);\n    fetch(process.env.REACT_APP_API + \"/seniors/?course=\" + id + \"&year=\" + selectedYear).then(response => response.json()).then(response => {\n      setNamesOnly(response.data.students[0][\"quote\"] == null && response.data.students[0][\"image\"] == null);\n      setPeople(response.data.students);\n      setImg( /*#__PURE__*/_jsxDEV(Image, {\n        src: process.env.REACT_APP_STATIC + response.data.image,\n        rounded: true,\n        fluid: true,\n        className: \"slideUpFade\",\n        style: {\n          animationDelay: animationBase + animationIncrement * 0 + \"s\",\n          \"marginBottom\": 50\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }, this));\n      setLoading(false);\n    }).catch(error => {\n      window.location.href = \"/404\";\n    });\n  }, [selectedYear]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex flex-column flex-wrap pb-5 mb-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"mb-5 text-center\",\n      children: /*#__PURE__*/_jsxDEV(Typist, {\n        children: \"Finalistas de \" + id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 46\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), anos, loading ? /*#__PURE__*/_jsxDEV(Spinner, {\n      animation: \"grow\",\n      variant: \"primary\",\n      className: \"mx-auto mb-3\",\n      title: \"A carregar...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [namesOnly && /*#__PURE__*/_jsxDEV(Row, {\n        children: img\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 29\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: namesOnly ? people.map((person, i) => /*#__PURE__*/_jsxDEV(TextList, {\n          colSize: 3,\n          text: person.name,\n          className: \"slideUpFade\",\n          style: {\n            animationDelay: animationBase + animationIncrement * 0 + \"s\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 45\n        }, this)) : people.map((person, i) => /*#__PURE__*/_jsxDEV(SeniorsCard, {\n          name: person.name,\n          quote: person.quote,\n          image: process.env.REACT_APP_STATIC + person.image,\n          colSizeXs: \"12\",\n          colSizeSm: \"6\",\n          colSizeLg: \"4\",\n          colSizeXl: \"3\",\n          className: \"slideUpFade\",\n          style: {\n            animationDelay: animationBase + animationIncrement * animKey++ + \"s\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 45\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Seniors, \"DrRLJMhRrRQk8MJkc/24ucMwuWQ=\", false, function () {\n  return [useParams];\n});\n\n_c = Seniors;\nexport default Seniors;\n\nvar _c;\n\n$RefreshReg$(_c, \"Seniors\");","map":{"version":3,"sources":["/home/joao/Documents/Website/src/Pages/Seniors/index.js"],"names":["React","useState","useEffect","useParams","Row","Spinner","Image","Tabs","TextList","SeniorsCard","Typist","animationBase","parseFloat","process","env","REACT_APP_ANIMATION_BASE","animationIncrement","REACT_APP_ANIMATION_INCREMENT","Seniors","id","animKey","people","setPeople","selectedYear","setSelectedYear","anos","setAnos","img","setImg","namesOnly","setNamesOnly","loading","setLoading","fetch","REACT_APP_API","then","response","json","courses","map","el","includes","window","location","href","catch","error","data","curso","year","sort","a","b","length","undefined","students","REACT_APP_STATIC","image","animationDelay","person","i","name","quote"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useParams } from 'react-router';\nimport { Row, Spinner } from 'react-bootstrap';\nimport Image from 'react-bootstrap/Image';\nimport Tabs from \"../../Components/Tabs/index.js\";\nimport TextList from \"../../Components/TextList\";\nimport SeniorsCard from \"./SeniorsCard\";\nimport Typist from 'react-typist';\n\n\n// Animation\nconst animationBase = parseFloat(process.env.REACT_APP_ANIMATION_BASE);\nconst animationIncrement = parseFloat(process.env.REACT_APP_ANIMATION_INCREMENT);\n\n\nconst Seniors = () => {\n\n    // get course from URL parameters\n    let {id} = useParams();\n\n    let animKey = 0; // index for delaying animations\n\n    const [people, setPeople] = useState([]);\n    const [selectedYear, setSelectedYear] = useState();\n    const [anos, setAnos] = useState([]);\n    const [img, setImg] = useState(\"\");\n\n    const [namesOnly, setNamesOnly] = useState(false);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        // get list of courses to check if 'id' is valid\n        fetch(process.env.REACT_APP_API + \"/seniors/courses/\")\n            .then((response) => response.json())\n            .then((response) => {\n                let courses = response[\"data\"].map( el => el[\"course\"] );\n                if (!courses.includes(id)) {\n                    window.location.href = \"/404\";\n                }\n            }).catch((error) => {\n                window.location.href = \"/404\";\n            });\n\n\n        // pegar o número de anos\n        fetch(process.env.REACT_APP_API + \"/seniors/courses/years/?course=\" + id)\n            .then((response) => response.json())\n            .then((response) => {\n                var anos = response.data.map((curso) => curso.year).sort((a, b) => b - a);\n                if (anos.length > 0) {\n                    setSelectedYear(anos[0])\n                    setAnos(<Tabs tabs={anos} _default={anos[0]} onChange={setSelectedYear} />)\n                }\n                else\n                    setAnos(\"\");\n            }).catch((error) => {\n                window.location.href = \"/404\";\n            });\n\n    }, [])\n\n    useEffect(() => {\n        if (selectedYear == undefined) return;\n        setLoading(true);\n\n        fetch(process.env.REACT_APP_API + \"/seniors/?course=\" + id +\"&year=\" + selectedYear)\n            .then((response) => response.json())\n            .then((response) => {\n                setNamesOnly( response.data.students[0][\"quote\"] == null &&\n                              response.data.students[0][\"image\"] == null );\n                setPeople(response.data.students);\n                setImg(\n                    <Image\n                        src={process.env.REACT_APP_STATIC + response.data.image}\n                        rounded\n                        fluid\n                        className=\"slideUpFade\"\n                        style={{\n                            animationDelay: animationBase + animationIncrement * 0 + \"s\",\n                            \"marginBottom\": 50\n                        }}\n                    />\n                );\n                setLoading(false);\n            }).catch((error) => {\n                window.location.href = \"/404\";\n            });\n    }, [selectedYear])\n\n\n\n    return (\n        <div className=\"d-flex flex-column flex-wrap pb-5 mb-5\">\n            <h2 className=\"mb-5 text-center\"><Typist>{\"Finalistas de \" + id}</Typist></h2>\n\n            {anos}\n\n            {\n                loading\n                    ?\n                    <Spinner animation=\"grow\" variant=\"primary\" className=\"mx-auto mb-3\" title=\"A carregar...\" />\n                    :\n                    <>\n                        {\n                            namesOnly &&\n                            <Row>\n                                {img}\n                            </Row>\n                        }\n                        \n\n                        <Row>\n                            {\n                                namesOnly ?\n                                    people.map(\n                                        (person, i) =>\n                                            <TextList\n                                                colSize={3}\n                                                text={person.name}\n                                                className=\"slideUpFade\"\n                                                style={{\n                                                    animationDelay: animationBase + animationIncrement * 0 + \"s\"\n                                                }}\n                                            />\n                                    )\n                                :\n                                    people.map(\n                                        (person, i) =>\n                                            <SeniorsCard\n                                                name={person.name}\n                                                quote={person.quote}\n                                                image={process.env.REACT_APP_STATIC + person.image}\n                                                colSizeXs=\"12\"\n                                                colSizeSm=\"6\"\n                                                colSizeLg=\"4\"\n                                                colSizeXl=\"3\"\n                                                className=\"slideUpFade\"\n                                                style={{\n                                                    animationDelay: animationBase + animationIncrement * animKey++ + \"s\"\n                                                }}\n                                            />\n                                    )\n                            }\n                            \n                        </Row>\n                    </>\n            }\n\n        </div>\n    )\n}\n\nexport default Seniors;"]},"metadata":{},"sourceType":"module"}